<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>How to make a URL shortner - Madhav Khosla</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="What is a URL shortner ? It is a service that takes in a larger URL and turns it into a smaller URL, for the sake of:
Convencice Tracking clicks Tracking where the URL was opened from. For Example:
Long URL: https://www.amazon.in/gp/bestsellers/?ref_=nav_em_cs_bestsellers_0_1_1_2 Short URL: http://MyWebSite.com/{key}
We replaced the larger url with a unique key in out system from which we can identify our unique key.
How to generate a key ?"><meta property="og:image" content><meta property="og:title" content="How to make a URL shortner"><meta property="og:description" content="What is a URL shortner ? It is a service that takes in a larger URL and turns it into a smaller URL, for the sake of:
Convencice Tracking clicks Tracking where the URL was opened from. For Example:
Long URL: https://www.amazon.in/gp/bestsellers/?ref_=nav_em_cs_bestsellers_0_1_1_2 Short URL: http://MyWebSite.com/{key}
We replaced the larger url with a unique key in out system from which we can identify our unique key.
How to generate a key ?"><meta property="og:type" content="article"><meta property="og:url" content="https://madhavkhoslaa.github.io/draft/urlshortner/"><meta property="article:section" content="draft"><meta property="article:published_time" content="2022-06-27T02:01:58+05:30"><meta property="article:modified_time" content="2022-06-27T02:01:58+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to make a URL shortner"><meta name=twitter:description content="What is a URL shortner ? It is a service that takes in a larger URL and turns it into a smaller URL, for the sake of:
Convencice Tracking clicks Tracking where the URL was opened from. For Example:
Long URL: https://www.amazon.in/gp/bestsellers/?ref_=nav_em_cs_bestsellers_0_1_1_2 Short URL: http://MyWebSite.com/{key}
We replaced the larger url with a unique key in out system from which we can identify our unique key.
How to generate a key ?"><script src=https://madhavkhoslaa.github.io/js/feather.min.js></script>
<link href=https://madhavkhoslaa.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://madhavkhoslaa.github.io/css/main.40ca3a860425083862b7ebd55447caec5c4384573f0cb098b8d06a91e8dace2e.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://madhavkhoslaa.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css></head><body><div class=content><header><div class=main><a href=https://madhavkhoslaa.github.io/>Madhav Khosla</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/draft>Draft</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>How to make a URL shortner</h1><div class=meta>Posted on Jun 27, 2022</div></div><section class=body><h1 id=what-is-a-url-shortner->What is a URL shortner ?</h1><p>It is a service that takes in a larger URL and turns it into a smaller URL, for the sake of:</p><ol><li>Convencice</li><li>Tracking clicks</li><li>Tracking where the URL was opened from.</li></ol><p>For Example:</p><p>Long URL: <code>https://www.amazon.in/gp/bestsellers/?ref_=nav_em_cs_bestsellers_0_1_1_2</code><br>Short URL: <code>http://MyWebSite.com/{key}</code></p><p>We replaced the larger url with a unique key in out system from which we can identify our unique key.</p><h1 id=how-to-generate-a-key->How to generate a key ?</h1><p>You need a way to transform your string to an other string, it could be either a set of random charecters or using a hashing algorithm.
You use a hashing function to create a key that does not exist our system and is unique to a (long url) or (long url + user)</p><h1 id=what-is-hashing-and-a-hash-function->What is hashing and a hash function ?</h1><p>hasing is the process of transforming a string to another key to a shorter representation, this is used in python to implement dictionaries which are also called &ldquo;hash tables&rdquo;.</p><p>A hashing function is a function that transforms a larger string to a smaller one. A good hashing function is a function in which no two strings have the same hash.</p><p>Hashing function Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hash</span>(key_str): 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> key_str[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;abc&#34;</span>
</span></span><span style=display:flex><span>print(hash(<span style=color:#e6db74>&#34;google.com&#34;</span>))
</span></span><span style=display:flex><span><span style=color:#f92672>//</span> ooabc
</span></span><span style=display:flex><span>print(hash(<span style=color:#e6db74>&#34;googgggle.com&#34;</span>))
</span></span><span style=display:flex><span><span style=color:#f92672>//</span> ooabc
</span></span></code></pre></div><h1 id=collision-hash>Collision Hash</h1><p>Let&rsquo;s observe our hashing function.
This hasing function is not the best function becasue two different URLs have exactly the same hash.
The scenario when we have one same hash for two completely different inputs is called a hash collision.
A good hasing algorithm has very less hash collisions.</p><h1 id=good-enough-hasing-algorithm>Good enough hasing algorithm</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>key_value_store <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>PREFIX<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;lmn&#34;</span>
</span></span><span style=display:flex><span>POST_FIX<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;abc&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hash_url</span>(long_url):
</span></span><span style=display:flex><span>    curr_hash <span style=color:#f92672>=</span> basic_hash(long_url)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(curr_hash <span style=color:#f92672>in</span> key_value_store):
</span></span><span style=display:flex><span>        hash_url <span style=color:#f92672>=</span> POST_FIX <span style=color:#f92672>+</span> long_url <span style=color:#f92672>+</span> PREFIX
</span></span><span style=display:flex><span>        curr_hash <span style=color:#f92672>=</span> basic_hash(hash_url)
</span></span><span style=display:flex><span>    key_value_store[curr_hash] <span style=color:#f92672>=</span> long_url
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> curr_hash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>basic_hash</span>(long_url):
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> long_url[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>4</span>] <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;xyz&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>hash_url(<span style=color:#e6db74>&#34;google.com&#34;</span>)
</span></span><span style=display:flex><span>hash_url(<span style=color:#e6db74>&#34;goooogle.com&#34;</span>)
</span></span><span style=display:flex><span>hash_url(<span style=color:#e6db74>&#34;gooooglee.com&#34;</span>)
</span></span><span style=display:flex><span>print(key_value_store)
</span></span><span style=display:flex><span><span style=color:#75715e># {&#39;googxyz&#39;: &#39;google.com&#39;, &#39;goooxyz&#39;: &#39;goooo2gle.com&#39;, &#39;abcgxyz&#39;: &#39;goooo3glee.com&#39;}</span>
</span></span></code></pre></div><h1 id=base-62-hashing>Base 62 Hashing</h1><h1 id=how-do-we-get-indexed-for-urls->How do we get indexed for URLs ?</h1><h1 id=how-to-store-shortened-urls-and-large-urls->How to store shortened URLs and large URLs ?</h1><h1 id=how-to-redirect-urls->How to redirect URLs ?</h1><h1 id=http-30x-codes>HTTP 30x Codes</h1><h1 id=storing-clicks-and-information-about-it>Storing clicks and information about it.</h1></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/system-design>System Design</a></li><li><a href=/tags/hashing>Hashing</a></li><li><a href=/tags/base62>Base62</a></li><li><a href=/tags/bloom-filter>Bloom Filter</a></li><li><a href=/tags/sql>SQL</a></li><li><a href=/tags/mongodb>MongoDB</a></li><li><a href=/tags/redis>Redis</a></li><li><a href=/tags/redirect>Redirect</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://bit.ly/3Qyr87Y title=GitHub><i data-feather=github></i></a><a class=soc href=https://bit.ly/3Qtgn6y title=Twitter><i data-feather=twitter></i></a></div><div class=footer-info>2023 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script>feather.replace()</script></div></body></html>