<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Creational Design Patterns: My lessons on it - Madhav Khosla</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Creational design patterns aid in the instantiation of objects by providing suitable abstractions and make the systems independent of how objects are created composed and represented."><meta property="og:image" content><meta property="og:title" content="Creational Design Patterns: My lessons on it"><meta property="og:description" content="Creational design patterns aid in the instantiation of objects by providing suitable abstractions and make the systems independent of how objects are created composed and represented."><meta property="og:type" content="article"><meta property="og:url" content="https://madhavkhoslaa.github.io/draft/ceationaldesignpatterns/"><meta property="article:section" content="draft"><meta property="article:published_time" content="2022-06-24T02:01:58+05:30"><meta property="article:modified_time" content="2022-06-24T02:01:58+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Creational Design Patterns: My lessons on it"><meta name=twitter:description content="Creational design patterns aid in the instantiation of objects by providing suitable abstractions and make the systems independent of how objects are created composed and represented."><script src=https://madhavkhoslaa.github.io/js/feather.min.js></script>
<link href=https://madhavkhoslaa.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://madhavkhoslaa.github.io/css/main.40ca3a860425083862b7ebd55447caec5c4384573f0cb098b8d06a91e8dace2e.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://madhavkhoslaa.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css></head><body><div class=content><header><div class=main><a href=https://madhavkhoslaa.github.io/>Madhav Khosla</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/draft>Draft</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>Creational Design Patterns: My lessons on it</h1><div class=meta>Posted on Jun 24, 2022</div></div><section class=body><h1 id=creational-design-patterns>Creational Design Patterns</h1><blockquote><p><a href=https://refactoring.guru/design-patterns/creational-patterns>Creational design patterns provide various object creation mechanisms, which increase flexibility and reuse of existing code</a>.</p></blockquote><h1 id=why-were-they-made-and-why-should-you-care-reading-them->Why were they made and why should you care reading them ?</h1><p>You must have noticed in a larger code base where there are multiple clases that dealing with the class instantiation becomes too hard, infact in the case of languages like java where the ecosystem expects everything to be a class; a framework called spring had been developed to solve the problem of instantiating classes(and so much more). So you get scope of the problem of just creation of objects.</p><p>Creational design patterns aid in the instantiation of objects by providing suitable abstractions and make the systems independent of how objects are created composed and represented.</p><p>They are important when a system grows large and require how objects are constructed rather than what objects are constructed. They are a step above a normal hardcoded instantiation like <code>const instance = new SomeClass()</code></p><p><img src=https://i.imgur.com/dmLLnXo.jpeg alt=image></p><hr><h1 id=the-builder-design-pattern>The Builder Design Pattern</h1><blockquote><p>Builder is a creational design pattern that lets you construct complex objects step by step. The pattern allows you to produce different types and representations of an object using the same construction code.</p></blockquote><h2 id=real-life-example>Real life example</h2><p>Have you ever been to a ice cream parlour where you are handed a sheet of paper and you tick on stuff and the create that ice cream for you ? Or if not it&rsquo;s similar to a subway shop where you select what you want in the sandwhich. The kind of bread you want, the kind of sauce are just the parameters you pass onto the sandwhich class or the ice cream class.</p><p><img src=https://i.imgur.com/Zh02EM4.png alt=image></p><p><strong><em>The Problem</em></strong>: Have you encountered a situation where a class requires so many arguments to be instantiated and some of them are optional too? The instantiation usually goes something like this <code>const instance = new ClassA(arg1, arg2? arg3, arg4, arg5, arg6)</code>; and you can relate how easy it is to forget the order of the arguments and what arguments the class requires in the first place. So there is a clear problem of the constructor being too large and complex, there can also be situations where the constructors are overloaded many times as well leading to even more confusion.</p><p><strong><em>Proposal</em></strong>: How about you create a method where you pass in arguments in a more visual way, such that you are aware of what you are passing and such that they provide an easy way to construct objects.</p><p><strong><em>How</em></strong>: You create multiple static variables holding values for the variables you are going to pass in the constructor, you create setter methods for these static variables with static methods, and create a <code>getInstance</code> method where you pass in the static variables and return an instance of the class. You can also choose to keep the constructor private if you want your instantiation only from the builder static methods.</p><blockquote><p>Builder methods provide a piecewise construction of an object</p></blockquote><h2 id=code-example>Code Example</h2><p>Suppose you need to have an object of type car in your application, maybe for an ORM. You need to create it piecewise and in a verbose manner in your system. This is how you will do it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-TypeScript data-lang=TypeScript><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Car</span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>_color</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>_pistons</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>_wheelbase</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>_length</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>color</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>pistons</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>wheelbase</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>length</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>color</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>pistons</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>wheelbase</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>length</span>: <span style=color:#66d9ef>number</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>pistons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pistons</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>wheelbase</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>wheelbase</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>setColor</span>(<span style=color:#a6e22e>color</span>: <span style=color:#66d9ef>string</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>setPistons</span>(<span style=color:#a6e22e>pistons</span>: <span style=color:#66d9ef>number</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_pistons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pistons</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>setWheelbase</span>(<span style=color:#a6e22e>wheelbase</span>: <span style=color:#66d9ef>number</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_wheelbase</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>wheelbase</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>setLength</span>(<span style=color:#a6e22e>length</span>: <span style=color:#66d9ef>number</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_length</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>getCar</span>(){
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Logic for checking values and passing in default values;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Car</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_color</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_pistons</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_wheelbase</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_length</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RedFerrari</span>: <span style=color:#66d9ef>Car</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>setColor</span>(<span style=color:#e6db74>&#34;Red&#34;</span>)
</span></span><span style=display:flex><span>                        .<span style=color:#a6e22e>setPistons</span>(<span style=color:#ae81ff>12</span>)
</span></span><span style=display:flex><span>                        .<span style=color:#a6e22e>setLength</span>(<span style=color:#ae81ff>2100</span>)
</span></span><span style=display:flex><span>                        .<span style=color:#a6e22e>setWheelbase</span>(<span style=color:#ae81ff>40</span>)
</span></span><span style=display:flex><span>                        .<span style=color:#a6e22e>getCar</span>();
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>RedFerrari</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>Car: {
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;color&#34;: &#34;Red&#34;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;pistons&#34;: 12,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;wheelbase&#34;: 40,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;length&#34;: 2100
</span></span></span><span style=display:flex><span><span style=color:#75715e>}
</span></span></span><span style=display:flex><span><span style=color:#75715e>**/</span>
</span></span></code></pre></div><h2 id=code-explanation>Code Explanation</h2><p>There are many static variables that you set from the static methods, these static methods return <code>this</code> so that you can use a chain of these methods. In the end, the <code>getCar</code> or an equivalent build function calls the constructor of the class and returns the fully created instance.</p><h2 id=something-cool-creating-html-from-code-and-builder-design-pattern>Something Cool (Creating HTML from Code and builder design pattern)</h2><p>While studying builder design patterns, I was able to create methods to generate HTML pages through code. I created an HTML class and an array that held the tags and the content for the tags. Every static function for header and paragraph took in the string values and appended them to the metadata static array. At the end when the <code>build</code> method is called it parses the static metadata array into a string that represents HTML. I was able to create an HTML page by just invoking functions on this object.</p><script type=application/javascript src=https://gist.github.com/madhavkhoslaa/70030671bfc1a54946812e6c85b65c16.js></script><h2 id=html-page-generated-from-the-above-code>HTML Page Generated From The Above Code</h2><p><img src=https://i.imgur.com/zurY13J.png alt=image></p><hr><h1 id=factory-design-pattern>Factory Design Pattern</h1><blockquote><p>Factory Method is a creational design pattern that provides an interface for creating objects in a superclass but allows subclasses to alter the type of objects that will be created.</p></blockquote><h2 id=real-life-example-1>Real life example</h2><p>Remeber how we had the options to create a custom ice cream in the builder design pattern ? It might be daunting for you to think what you want at the store or maybe seeing so many options makes you anxious ? If that&rsquo;s so; you order something from the menu itself, you dont have to talk to the server and just tell him what you want without telling the specifics of what you want. An example of this is just the menu.</p><p><img src=https://i.imgur.com/NGvd6bS.png alt=image></p><p><strong><em>The Problem</em></strong>: Sometimes there are a lot of objects of the same type and kind that have to be created and sometimes those objects can be builder classes too and the instantiation of a builder object is too ceremonial, piecewise, and takes time. To tackle this problem of creating objects piecewise; factory design patterns were made to create objects in a wholesale manner. You just invoke a particular function with a verbose name of what object you want and get the instance of the object. For example, if you have a builder class for cars, you gave call a lot of methods to just create an instance, but in the case of a factory design, you can create a function with an appropriate name that returns the same object every time you invoke it.</p><p><strong><em>Proposal</em></strong>: You create an abstraction where you receive objects of the same type base on what function you call, this abstraction sends the same interface but different implementations of the same interface, so you are not aware of all of the exact classes, just the interfaces.</p><p><strong><em>How</em></strong>: You create a class &ldquo;called the factory class&rdquo; and static methods. These static methods have to be verbose enough to tell you what kind of an object they are returning, and that&rsquo;s how you build a factory class.</p><h2 id=code-example-1>Code Example</h2><p>For example, you have an application that runs on Windows and macOS. However, function calls for windows and macOS are different and you have created two classes to implement the click functionality. Based on the OS you are running your code on, you can decide what kind of button you want from the <code>ButtonFactory</code> class.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-TypeScript data-lang=TypeScript><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Button</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>click</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MacOS</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>Button</span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>arg1</span>: <span style=color:#66d9ef>string</span>){}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>click</span>(){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;MacOS Button says &#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>arg1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Windows</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>Button</span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>arg1</span>: <span style=color:#66d9ef>string</span>){}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>click</span>(){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Windows Button&#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>arg1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ButtonFactory</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>constructor</span>(){}
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>getMacOsButton</span>(<span style=color:#a6e22e>arg1</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Button</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MacOS</span>(<span style=color:#a6e22e>arg1</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>getWindowsButton</span>(<span style=color:#a6e22e>arg1</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Button</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Windows</span>(<span style=color:#a6e22e>arg1</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MacButton</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ButtonFactory</span>.<span style=color:#a6e22e>getMacOsButton</span>(<span style=color:#e6db74>&#34;Called from factory&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>MacButton</span>.<span style=color:#a6e22e>click</span>())
</span></span><span style=display:flex><span><span style=color:#75715e>// MacOS Button says Called from factory
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>WinButton</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ButtonFactory</span>.<span style=color:#a6e22e>getWindowsButton</span>(<span style=color:#e6db74>&#34;Called from factory&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>WinButton</span>.<span style=color:#a6e22e>click</span>())
</span></span><span style=display:flex><span><span style=color:#75715e>// Windows ButtonCalled from factory
</span></span></span></code></pre></div><h2 id=explanation>Explanation</h2><p>Here there is a single interface called the <code>Button</code> and two classes <code>MacOS</code> and <code>Windows</code> implement that interface. Depending on what instance you want from the factory interface you can get it from the factory class. For Example <code>const MacButton = ButtonFactory.getMacOsButton("Called from factory")</code></p><hr><h1 id=abstract-factory-design-pattern>Abstract Factory Design Pattern</h1><blockquote><p>Abstract Factory is a creational design pattern that lets you produce families of related objects without specifying their concrete classes.</p></blockquote><h2 id=real-life-example-2>Real life example</h2><p>In india alot of restaurants have different types of cuisines and then they are divided by the region and then by the type. The first layer of selection(the cuisine) provides the second layer of selection(the type of dish) and then comes the dishes itself. This is an example of the abstract factory design pattern.
<img src=https://i.imgur.com/cIbQG0p.png alt=image></p><p><strong><em>The Problem</em></strong>: Now in the above example of buttons, there was a separation based on OS. But imagine in a case of a framework, where there are buttons, alerts, input boxes, and so many things. The call can differ based on the OS they are on. Now imagine you as a developer instantiating a MacOS button, Alert and Windows button, Alert from the class itself; it would be tedious, wouldn&rsquo;t it? To tackle this problem of</p><p><strong><em>Proposal</em></strong>: Provide abstraction of creation of classes without exposing the classes themselves. Provide interfaces to provide factories then build objects through them.</p><p><strong><em>How</em></strong>: Create a top factory class, and create methods to return sub-factory classes that return the final objects.</p><h2 id=code-example-2>Code Example</h2><p>Suppose you are building a web framework that runs natively on machines(macOS and Windows). The features that you want to provide in the different OS are the same however their implementation varies a lot. So you want to separate the instantiation of buttons, alerts, and other features based on the OS, then based on what the actual functionality is; giving the users choice of what kind of object they need.</p><p>For Example, You need to create an alert box for windows. The process would be <code>Go through library => Choose the functionality you want to do => Choose the OS for the functionality</code>, Here we are building abstract factories for this very particular use case.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-TypeScript data-lang=TypeScript><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AlertBox</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alert() {</span>}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Button</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>click() {</span>}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MacOSAlert</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>AlertBox</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alert</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;MacOS Alert&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WindowsAlert</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>AlertBox</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alert</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Windows Alert&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MacOSButton</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Button</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>click() {</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;MacOS Click&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WindowsButton</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Button</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>click() {</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Windows Click&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ButtonFactory</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Windows</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>Button</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>WindowsButton</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MacOs</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>Button</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MacOSButton</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AlertFactory</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Windows() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>WindowsAlert</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MacOs() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MacOSAlert</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UIFactory</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>Button</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>ButtonFactory</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>ButtonFactory</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>Alert</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>AlertFactory</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>AlertFactory</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MacOsButton</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>UIFactory</span>.<span style=color:#a6e22e>Alert</span>().<span style=color:#a6e22e>MacOs</span>().<span style=color:#a6e22e>alert</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// &#34;MacOS Alert&#34;
</span></span></span></code></pre></div><h2 id=explanation-1>Explanation</h2><p>Here we wanted to create an alert on the macOS, hence from the <code>UIFactory</code>, we called the <code>AlertFactory</code> which returned an instance of <code>AlertFactory</code>. It had two implementations of alert, one being for <code>MacOS</code> and the other being for <code>Windows</code>. We then called the <code>macOS</code> implementation.</p><p>You could also argue if the UI factory should be returning a <code>MacOSFactory</code> and <code>WindowsFactory</code> with their respective implementations, which is a correct implementation too.</p><hr><h1 id=singleton-design-pattern>Singleton Design Pattern</h1><blockquote><p>Singleton is a creational design pattern, which ensures that only one object of its kind exists and provides a single point of access to it for any other code.</p></blockquote><h2 id=real-life-example-3>Real life example</h2><p>Imagine a situation you and your friends order a really large sundae and eat it together. Throughout the lifecycle of that icecream(until it melts or you eat it) it remains a singular and you and your friends consume it. This single large sundae is a singleton.
<img src=https://i.imgur.com/Pm4Nqsy.png alt=image></p><p><strong><em>The Problem</em></strong>: In some scenarios you only want one instance of a class to be present, for example, you have a class that opens a session to the DB and you pass in query strings to it to receive objects. If this object were to be instantiated multiple times in a lifecycle of a program then there will be many connections open in the DB.</p><p><strong><em>Proposal</em></strong>: You create an instance of the class and abstraction to get the instance of the class. That abstraction only returns a single instance of the class always.</p><p><strong><em>How</em></strong>: You create a class with a private constructor, and you create a static method called <code>getInstance</code> or something similar. On invoking that function set a static variable of the class with the new instance and return the same instance every time that function is called.</p><h2 id=code-example-3>Code Example</h2><p>For example, you want to log events in a log file, You want to log a string when some function is called or when some event occurs. You create instance of logger at different places and log the events. All these events will be logged in a single file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-TypeScript data-lang=TypeScript><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LogFileWriter</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>session</span>: <span style=color:#66d9ef>any</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>_instance</span>: <span style=color:#66d9ef>LogFileWriter</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>__dirname</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;./logs&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>filename</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;log.txr&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>constructor</span>(){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>session</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>write</span>(<span style=color:#a6e22e>log</span>: <span style=color:#66d9ef>string</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>writeFileSync</span>(<span style=color:#a6e22e>join</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>__dirname</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>filename</span>), <span style=color:#a6e22e>log</span>, {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>flag</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;w&#39;</span>,
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>getLogs</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>readFileSync</span>(<span style=color:#a6e22e>join</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>__dirname</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>filename</span>), <span style=color:#e6db74>&#39;utf-8&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>getLogger</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>LogFileWriter</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_instance</span>){
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_instance</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>LogFileWriter</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_instance</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Logger</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>LogFileWriter</span>.<span style=color:#a6e22e>getLogger</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Logger2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>LogFileWriter</span>.<span style=color:#a6e22e>getLogger</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>Logger</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>Logger2</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// True
</span></span></span></code></pre></div><h2 id=code-explanation-1>Code Explanation</h2><p>The <code>getLogger</code> method on the first call creates the instance of the <code>LogFileWriter</code> class and sets it to the static variable. This on the other runs is then returned from the static class variable it is saved in.</p><p>However, in a multithreaded environment, this can create multiple instances if a single thread has a different execution context than the current one.</p><hr><h1 id=prototype-design-pattern>Prototype Design Pattern</h1><blockquote><p>Prototype is a creational design pattern that lets you copy existing objects without making your code dependent on their classes.</p></blockquote><h2 id=real-life-example-4>Real life example</h2><p><img src=https://i.imgur.com/ZMlqkN7.png alt=image></p><p><strong><em>The Problem</em></strong>: For example every time you create an instance of a class, there is a large blocking operation that takes place in the constructor of the class(Maybe a DB call or a large file read) that happens every time you create an instance, it&rsquo;s better the next time you create the instance, you could somehow use the same data from the old instance. The prototype design pattern solves this problem by providing objects with a clone method, to copy their values to other objects.</p><p><strong><em>Proposal</em></strong>: Provide an object cloning method to the class so that a <code>.clone()</code> method will return the copy of the object. I have here created a shallow and deep clone for shallow and deep copies.</p><p><strong><em>How</em></strong>: Create an abstract class for the prototype design pattern, create a generic logic for cloning and extend all the classes with that abstract class where you want them to have cloning methods.</p><h2 id=code-example-4>Code Example</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-TypeScript data-lang=TypeScript><span style=display:flex><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IPrototype</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Shallowclone</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>any</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> Object.<span style=color:#a6e22e>assign</span>(<span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>DeepClone</span>()<span style=color:#f92672>:</span> Object {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#66d9ef>this</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DB</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>IPrototype</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ARR</span>: <span style=color:#66d9ef>string</span>[]) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>d</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>DB</span>([<span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;2&#34;</span>]);
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>d</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>d2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>Shallowclone</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>d3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>DeepClone</span>();
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>d2</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>ARR</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;-1&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>d</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>d2</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>d3</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * OutPut
</span></span></span><span style=display:flex><span><span style=color:#75715e>DB { ARR: [ &#39;1&#39;, &#39;2&#39; ] }
</span></span></span><span style=display:flex><span><span style=color:#75715e>DB { ARR: [ &#39;1&#39;, &#39;2&#39; ] }
</span></span></span><span style=display:flex><span><span style=color:#75715e>DB { ARR: [ &#39;-1&#39;, &#39;2&#39; ] }
</span></span></span><span style=display:flex><span><span style=color:#75715e>DB { ARR: [ &#39;-1&#39;, &#39;2&#39; ] }
</span></span></span><span style=display:flex><span><span style=color:#75715e>{ ARR: [ &#39;1&#39;, &#39;2&#39; ] }
</span></span></span><span style=display:flex><span><span style=color:#75715e>*
</span></span></span><span style=display:flex><span><span style=color:#75715e>**/</span>
</span></span></code></pre></div><h2 id=code-explanation-2>Code Explanation</h2><p>Here the base abstract class provides a <code>DeepCopy</code> and a <code>ShallowCopy</code> methods and the classes that extend them can use these methods to copy objects to other variables.</p><hr><hr></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/design-patterns>Design Patterns</a></li><li><a href=/tags/gang-of-four>Gang of four</a></li><li><a href=/tags/singleton>Singleton</a></li><li><a href=/tags/prototype>Prototype</a></li><li><a href=/tags/factory>Factory</a></li><li><a href=/tags/builder>Builder</a></li><li><a href=/tags/uncle-bob>Uncle Bob</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://bit.ly/3Qyr87Y title=GitHub><i data-feather=github></i></a><a class=soc href=https://bit.ly/3Qtgn6y title=Twitter><i data-feather=twitter></i></a></div><div class=footer-info>2022 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script>feather.replace()</script></div></body></html>